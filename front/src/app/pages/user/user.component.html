<h1>Gerenciamento de UsuÃ¡rios</h1>

<p>
  Esta pÃ¡gina lista todos os usuÃ¡rios. VocÃª pode visualizar e editar o papel (Role) e a senha de cada usuÃ¡rio.
</p>

<hr>

<h3>Lista de UsuÃ¡rios</h3>

<table class="users-table">
  <thead>
  <tr>
    <th>ID (UUID)</th>
    <th>Username (Email)</th>
    <th>Papel (Role)</th>
    <th>Nova Senha (EdiÃ§Ã£o)</th>
    <th>AÃ§Ãµes</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let u of users">
    <ng-container *ngIf="editando?.id === u.id; else viewMode">
      <td><span class="user-id">{{ u.id }}</span></td>
      <td><input [(ngModel)]="editando!.username" disabled class="input-disabled"></td>
      <td>
        <select [(ngModel)]="editando!.roleId" class="role-select">
          <ng-container *ngIf="roles.length > 0; else noRoles">
            <option *ngFor="let r of roles" [value]="r.id">{{ r.name }}</option>
          </ng-container>
          <ng-template #noRoles>
            <option [value]="editando!.roleId" disabled selected>{{ getRoleName(editando!.role) }}</option>
          </ng-template>
        </select>
      </td>
      <td>
        <input type="password" placeholder="Preencha p/ mudar a senha" [(ngModel)]="editando!.password">
      </td>
      <td>
        <button (click)="salvarEdicao()" class="btn-action btn-save">ğŸ’¾ Salvar</button>
        <button (click)="cancelarEdicao()" class="btn-action btn-cancel">âŒ Cancelar</button>
      </td>
    </ng-container>

    <ng-template #viewMode>
      <td><span class="user-id">{{ u.id }}</span></td>
      <td>{{ u.username }}</td>
      <td>{{ getRoleName(u.role) }}</td>
      <td> - </td>
      <td>
        <button (click)="editar(u)" class="btn-action btn-edit">âœï¸ Editar</button>
        <button (click)="deletar(u.id)" class="btn-action btn-delete">ğŸ—‘ï¸ Deletar</button>
      </td>
    </ng-template>
  </tr>
  </tbody>
</table>
